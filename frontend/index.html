<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>MyApp</title>
</head>
<body>
  <div id="app">
    <h3>ãƒ­ã‚°å‡ºåŠ›</h3>
    <pre id="logArea" style="background: #f4f4f4; padding: 1em; border: 1px solid #ccc;"></pre>
    <button id="notifyButton">é€šçŸ¥ã‚’è¡¨ç¤º</button>
  </div>

  <script type="module">
    window.addEventListener("DOMContentLoaded", () => {
      console.log("âœ… DOM loaded");

      async function waitForBackendReady() {
        while (!window.backend || !window.backend.App) {
          await new Promise((resolve) => setTimeout(resolve, 100));
        }

        console.log("âœ… Wails backend ready");

        const button = document.getElementById("notifyButton");
        const output = document.getElementById("logArea");

        if (!button) {
          console.error("âŒ ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼");
          return;
        }

        button.addEventListener("click", async () => {
          console.log("ğŸš€ ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸï¼");
          try {
            const result = await window.backend.App.RunScript();
            console.log("âœ… RunScript çµæœ:", result);
            output.textContent = result;
          } catch (error) {
            console.error("âŒ RunScript ã‚¨ãƒ©ãƒ¼:", error);
            output.textContent = "ã‚¨ãƒ©ãƒ¼: " + error;
          }
        });
      }

      waitForBackendReady();
    });
  </script>
</body>
</html>
